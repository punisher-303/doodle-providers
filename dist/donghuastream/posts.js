"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const BASE_URL="https://donghuastream.org";async function getPosts({filter:filter="anime/?status=&type=&order=update&page=",page:page=1,signal:signal,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;try{const url=`${BASE_URL}/${filter}${page}`,res=await axios.get(url,{signal:signal}),$=cheerio.load(res.data||""),posts=[];return $("div.listupd > article").each((_,el)=>{const el$=$(el),title=el$.find("div.bsx > a").attr("title")||"",href=el$.find("div.bsx > a").attr("href")||"",poster=el$.find("div.bsx a img").attr("data-src")||"";title&&href&&posts.push({title:title,link:href.startsWith("http")?href:new URL(href,BASE_URL).href,image:poster.startsWith("http")?poster:new URL(poster,BASE_URL).href})}),posts}catch(err){return[]}}async function getSearchPosts({searchQuery:searchQuery,page:page=1,signal:signal,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;try{const url=`${BASE_URL}/?s=${encodeURIComponent(searchQuery.trim())}`,res=await axios.get(url,{signal:signal}),$=cheerio.load(res.data||""),posts=[];return $("div.listupd > article").each((_,el)=>{const el$=$(el),title=el$.find("div.bsx > a").attr("title")||"",href=el$.find("div.bsx > a").attr("href")||"",poster=el$.find("div.bsx a img").attr("data-src")||"";title&&href&&posts.push({title:title,link:href.startsWith("http")?href:new URL(href,BASE_URL).href,image:poster.startsWith("http")?poster:new URL(poster,BASE_URL).href})}),posts}catch(err){return[]}}