"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=async function({url:url,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;try{const res=await axios.get(url),$=cheerio.load(res.data),episodes=[];return $("div.season-section").each((_,section)=>{const sectionEl=$(section);let seasonNum=1;const match1=(sectionEl.html()||"").match(/season-(?:packs|episodes)-(\d+)/);if(match1)seasonNum=parseInt(match1[1],10);else{const regex2=/Season\s*(\d+)/i,match2=sectionEl.find("button.toggle-season-btn").text().match(regex2);match2&&(seasonNum=parseInt(match2[1],10))}sectionEl.find(".episode-card").each((idx,card)=>{const cardEl=$(card),cardTitle=cardEl.find(".episode-title").text().trim(),epMatch=cardTitle.match(/S(\d{1,2})E(\d{1,3})/i);let epNum=idx+1;epMatch&&(epNum=parseInt(epMatch[2],10));cardEl.find("a.movie-download-btn, a.download-button").map((_,el)=>$(el).attr("href")).get().filter(l=>l&&l.trim().length>0).forEach(link=>{episodes.push({title:`S${seasonNum} E${epNum} - ${cardTitle||"Episode "+epNum}`,link:link})})}),sectionEl.find(".packs-grid .pack-card").each((idx,pack)=>{var _a;const link=null===(_a=$(pack).find("a.download-button").attr("href"))||void 0===_a?void 0:_a.trim();link&&episodes.push({title:`Season ${seasonNum} Pack ${idx+1}`,link:link})})}),episodes}catch(err){return[]}};exports.getEpisodes=getEpisodes;