"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=getMeta;const HEADERS={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"};async function getMeta({link:link,providerContext:providerContext}){const{axios:axios}=providerContext;try{const html=(await axios.get(link,{headers:HEADERS})).data,titleMatch=/<div class="data"[^>]*>[\s\S]*?<h1>([^<]+)<\/h1>/i.exec(html);let title=titleMatch?titleMatch[1].trim():"";const cleanMatch=title.match(/(^.*)\(\d{4}\)/);cleanMatch&&(title=cleanMatch[1].trim());let image="";const gItemMatch=/class="g-item"[^>]*>[\s\S]*?<a[^>]+href="([^"]+)"/i.exec(html);if(gItemMatch)image=gItemMatch[1];else{const posterImgMatch=/class="poster"[^>]*>[\s\S]*?<img[^>]+src="([^"]+)"/i.exec(html);posterImgMatch&&(image=posterImgMatch[1])}let synopsis="";const contentBlockMatch=/class="wp-content"[^>]*>([\s\S]*?)<\/div>/i.exec(html);if(contentBlockMatch){const rawContent=contentBlockMatch[1],pMatch=/<p[^>]*>([\s\S]*?)<\/p>/i.exec(rawContent);synopsis=(pMatch?pMatch[1]:rawContent).replace(/<[^>]+>/g,"").trim()}const ratingMatch=/class="dt_rating_vgs"[^>]*>\s*([\d\.]+)/i.exec(html),rating=ratingMatch?ratingMatch[1]:"0",isTv=link.includes("/tvshows/")||html.includes('id="seasons"'),info={title:title,image:image,synopsis:synopsis,rating:rating,imdbId:"",type:isTv?"series":"movie",linkList:[]};if(isTv){const seasonBlockRegex=/<ul\s+class=["']episodios["']/gi;let seasonCount=0;for(;null!==seasonBlockRegex.exec(html);)seasonCount++;0===seasonCount&&(seasonCount=1);for(let i=1;i<=seasonCount;i++)info.linkList.push({title:`Season ${i}`,episodesLink:`${link}|${i}`,directLinks:[]})}else info.linkList.push({title:"Movie",episodesLink:"",directLinks:[{title:"Watch",link:link}]});return info}catch(err){return{title:"",image:"",synopsis:"",imdbId:"",type:"movie",linkList:[]}}}