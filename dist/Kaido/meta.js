"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-store","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",Referer:"https://kaido.to"},getMeta=function({link:link,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext,empty={title:"",synopsis:"",image:"",imdbId:"",type:"series",linkList:[]};return axios.get(link,{headers:headers}).then(res=>{var _a,_b;const $=cheerio.load(res.data||""),title=$("h2.film-name").first().text().trim()||$(".breadcrumb-item.active").text().trim();let image=$(".anisc-poster img").attr("src")||(null===(_b=null===(_a=$(".anis-cover").attr("style"))||void 0===_a?void 0:_a.match(/url\((.*?)\)/))||void 0===_b?void 0:_b[1])||"";image.startsWith("//")&&(image="https:"+image);const synopsis=$(".film-description .text").text().trim()||$(".anisc-info .item .text").first().text().trim();let watchBase=$(".film-buttons a.btn-play").attr("href")||"";watchBase&&!watchBase.startsWith("http")&&(watchBase="https://kaido.to"+watchBase);const info={title:title,synopsis:synopsis,image:image,imdbId:"",type:"series",linkList:[]},episodeIds=[];return $("a").each((_,el)=>{const match=($(el).attr("href")||"").match(/ep=(\d+)/);match&&!episodeIds.includes(match[1])&&episodeIds.push(match[1])}),watchBase&&info.linkList.push({title:"Episodes",quality:"HD",episodesLink:watchBase,directLinks:episodeIds.map(ep=>({title:`Episode ${ep}`,link:`${watchBase}?ep=${ep}`}))}),info}).catch(err=>empty)};exports.getMeta=getMeta;