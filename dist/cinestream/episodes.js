"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const CINEMETA="https://v3-cinemeta.strem.io",getEpisodes=async function({url:url,providerContext:providerContext}){var _a,_b;const{axios:axios}=providerContext;try{const parsed=new URL(url);let imdbId=parsed.pathname.replace("/","")||parsed.hostname||"";if(!imdbId.startsWith("tt"))return[];const season=parsed.searchParams.get("season")||"1",videos=null===(_b=null===(_a=(await axios.get(`${CINEMETA}/meta/series/${imdbId}.json`,{validateStatus:()=>!0})).data)||void 0===_a?void 0:_a.meta)||void 0===_b?void 0:_b.videos;return Array.isArray(videos)&&0!==videos.length?videos.filter(ep=>String(ep.season)===String(season)).map(ep=>({title:`Episode ${ep.episode}`,link:`cinestream://${imdbId}?season=${ep.season}&episode=${ep.episode}`})):[{title:"Play",link:url}]}catch(err){return[]}};exports.getEpisodes=getEpisodes;