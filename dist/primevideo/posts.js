"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts;const MAIN_URL="https://net20.cc",BASE_HEADERS={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36","X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/home`};async function getBypassCookie(axios){try{const cookies=(await axios.post(`${MAIN_URL}/tv/p.php`,null,{headers:BASE_HEADERS})).headers["set-cookie"];if(!cookies)return"";const match=(Array.isArray(cookies)?cookies.join(";"):cookies).match(/t_hash_t=[^;]+/);return match?match[0]:""}catch(_a){return""}}async function getPosts({filter:filter,page:page=1,providerContext:providerContext}){var _a,_b;const{axios:axios}=providerContext,unixTime=Math.floor(Date.now()/1e3);let query="";"movies"===filter?query="movie":"tv"===filter?query="season":"top10"===filter&&(query="top");const bypass=await getBypassCookie(axios),headers={...BASE_HEADERS,Cookie:`ott=pv; hd=on; ${bypass}`,Referer:`${MAIN_URL}/tv/home`},url=`${MAIN_URL}/pv/search.php?s=${encodeURIComponent(query)}&t=${unixTime}`;try{const res=await axios.get(url,{headers:headers});return(null!==(_b=null===(_a=res.data)||void 0===_a?void 0:_a.searchResult)&&void 0!==_b?_b:[]).map(item=>({title:item.t,image:`https://imgcdn.kim/pv/v/${item.id}.jpg`,link:item.id}))}catch(_c){return[]}}