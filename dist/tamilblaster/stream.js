"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const STREAM_HG="https://tryzendm.com",COMMON_HEADERS={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};async function getStream({link:link,signal:signal,providerContext:providerContext}){const{axios:axios}=providerContext;try{let iframeUrl=link;if(iframeUrl.includes("hg")||iframeUrl.includes("hglink")){const parts=iframeUrl.split("/e/");if(parts.length>1){const cleanId=parts[1].split("?")[0];iframeUrl=`${STREAM_HG}/e/${cleanId}`}}const html=(await axios.get(iframeUrl,{signal:signal,headers:{...COMMON_HEADERS,Referer:iframeUrl}})).data;let m3u8=null;const jwPlayerMatch=html.match(/(?:file|source)\s*:\s*["']([^"']+\.m3u8[^"']*)["']/i);if(jwPlayerMatch&&(m3u8=jwPlayerMatch[1]),!m3u8){const directMatch=html.match(/(https?:\/\/[^\s"']+\.m3u8[^\s"']*)/);directMatch&&(m3u8=directMatch[1])}if(!m3u8)return[];return[{server:"VidHide / StreamHG",link:m3u8,type:"hls",headers:{Referer:iframeUrl,Origin:new URL(iframeUrl).origin,"User-Agent":COMMON_HEADERS["User-Agent"],Accept:"*/*","Accept-Language":"en-US,en;q=0.9"}}]}catch(err){return[]}}