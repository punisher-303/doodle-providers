"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"};function forceGdflix(url){return url.includes("gdflix.dev")?url.replace("gdflix.dev","new13.gdflix.net"):url}function safeGet(axios,url,signal){return axios.get(url,{headers:headers,signal:signal,timeout:8e3})}function getStream({link:link,signal:signal,providerContext:providerContext}){const axios=providerContext.axios,cheerio=providerContext.cheerio,streams=[];return safeGet(axios,forceGdflix(link),signal).then(res=>{const $=cheerio.load(res.data||"");return $("a:contains('CLOUD DOWNLOAD')").each((_,el)=>{const href=$(el).attr("href");href&&streams.push({server:"gdflix-r2",link:href,type:"mp4"})}),$("a[href*='pixeldrain.dev/u/']").each((_,el)=>{const href=$(el).attr("href");if(!href)return;const fileId=href.split("/u/")[1];if(!fileId)return;const finalPixelLink=`https://pixeldrain.dev/api/file/${fileId}`;streams.push({server:"pixeldrain",link:finalPixelLink,type:"mp4"})}),streams}).catch(()=>streams).then(()=>Array.from(new Map(streams.map(s=>[s.link,s])).values()))}