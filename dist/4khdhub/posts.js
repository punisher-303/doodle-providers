"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=async function({filter:filter,page:page,signal:signal,providerContext:providerContext}){const{getBaseUrl:getBaseUrl,cheerio:cheerio}=providerContext;return posts({url:`${await getBaseUrl("4khdhub")+filter}/page/${page}`,signal:signal,cheerio:cheerio})};exports.getPosts=getPosts;const getSearchPosts=async function({searchQuery:searchQuery,page:page,signal:signal,providerContext:providerContext}){const{getBaseUrl:getBaseUrl,cheerio:cheerio}=providerContext,baseUrl=await getBaseUrl("4khdhub");return posts({url:1==page?`${baseUrl}/?s=${searchQuery}`:`${baseUrl}/page/${page}?s=${searchQuery}`,signal:signal,cheerio:cheerio})};async function posts({url:url,signal:signal,cheerio:cheerio}){try{const res=await fetch(url,{signal:signal}),data=await res.text(),$=cheerio.load(data),catalog=[];return $(".card-grid").children().map((i,element)=>{const title=$(element).find(".movie-card-title").text(),link=$(element).attr("href"),image=$(element).find("img").attr("src");title&&link&&image&&catalog.push({title:title,link:link,image:image})}),catalog}catch(err){return[]}}exports.getSearchPosts=getSearchPosts;