"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const API_URL="https://api.mxplayer.in/v1/web",IMAGE_URL="https://qqcdnpictest.mxplay.com/",ENDPOINT_URL="https://d3sgzbosmwirao.cloudfront.net/",defaultHeaders={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",Referer:"https://www.mxplayer.in/"},getEpisodes=async function({url:url,providerContext:providerContext}){var _a,_b;const{axios:axios}=providerContext;if(url.startsWith("http"))return[{title:"Full Movie",link:url,image:""}];const seasonId=url,episodes=[];let nextQuery=null;const endParam="&device-density=2&userid=&platform=com.mxplay.desktop&content-languages=hi,en&kids-mode-enabled=false";do{let apiUrl=`${API_URL}/detail/tab/tvshowepisodes?type=season&id=${seasonId}&sortOrder=0${endParam}`;nextQuery&&(apiUrl=`${API_URL}/detail/tab/tvshowepisodes?type=season&${nextQuery}&id=${seasonId}&sortOrder=0${endParam}`);try{const data=(await axios.get(apiUrl,{headers:defaultHeaders})).data,items=data.items||[];for(const item of items){const title=item.title||`Episode ${item.sequence}`,imgPath=null===(_b=null===(_a=item.imageInfo)||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.url,image=imgPath?IMAGE_URL+imgPath:"",streamData=JSON.stringify({stream:item.stream,videoHash:item.videoHash});episodes.push({title:title,link:streamData,image:image})}nextQuery=data.next}catch(e){break}}while(nextQuery);return episodes};exports.getEpisodes=getEpisodes;