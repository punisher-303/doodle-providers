"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"},getPosts=({filter:filter,page:page,providerValue:providerValue,signal:signal,providerContext:providerContext})=>{const cheerio=providerContext.cheerio;return providerContext.getBaseUrl("Vega").then(baseUrl=>posts(baseUrl,baseUrl+"/"+filter+"/page/"+page+"/",signal,cheerio))};exports.getPosts=getPosts;const getSearchPosts=({searchQuery:searchQuery,page:page,providerValue:providerValue,signal:signal,providerContext:providerContext})=>{const cheerio=providerContext.cheerio;return providerContext.getBaseUrl("Vega").then(baseUrl=>{const url=baseUrl+"/page/"+page+"/?s="+encodeURIComponent(searchQuery);return posts(baseUrl,url,signal,cheerio)})};exports.getSearchPosts=getSearchPosts;const posts=(baseUrl,url,signal,cheerio)=>fetch(url,{headers:{...headers,Referer:baseUrl},signal:signal}).then(res=>res.text()).then(html=>{const $=cheerio.load(html),results=[];return $("#archive-container li.entry-list-item article").each((_i,el)=>{const titleEl=$(el).find(".entry-title a").first(),title=titleEl.text().replace(/Download/i,"").trim(),link=titleEl.attr("href")||$(el).find("a").first().attr("href")||"";let image=$(el).find("img").attr("data-lazy-src")||$(el).find("img").attr("data-src")||$(el).find("img").attr("src")||"";0===image.indexOf("//")&&(image="https:"+image),title&&link&&results.push({title:title,link:link,image:image})}),results}).catch(()=>[]);