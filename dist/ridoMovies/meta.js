"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=function(_a){return __awaiter(this,arguments,void 0,function*({link:link,providerContext:providerContext}){var _b,_c;const{axios:axios,cheerio:cheerio}=providerContext;try{const res=yield axios.get(link,{headers:headers}),$=cheerio.load(res.data),title=$(".sheader h1").first().text().trim()||(null===(_b=$("meta[property='og:title']").attr("content"))||void 0===_b?void 0:_b.trim())||"";let image=$(".sheader .poster img").attr("src")||$(".sheader .poster img").attr("data-src")||$("meta[property='og:image']").attr("content")||"";image&&!image.startsWith("http")&&(image=new URL(image,link).href);const tagline=$(".sheader .tagline").text().trim(),date=$(".sheader .date").text().trim(),country=$(".sheader .country").text().trim(),runtime=$(".sheader .runtime").text().trim(),contentRating=$(".sheader .rated").text().trim(),rating=$(".starstruck-rating span[itemprop='ratingValue']").text().trim()||"";let synopsis="";$("#info .wp-content p").each((_,el)=>{const txt=$(el).text().trim();if(txt&&txt.length>30&&!txt.toLowerCase().includes("watch online")&&!txt.toLowerCase().includes("download")&&!txt.toLowerCase().includes("share")&&!txt.toLowerCase().includes("support"))return synopsis=txt,!1}),synopsis||(synopsis=(null===(_c=$("meta[name='description']").attr("content"))||void 0===_c?void 0:_c.trim())||"No synopsis available.");const tags=[];$(".sgeneros a").each((_,el)=>{const txt=$(el).text().trim();txt&&tags.push(txt)});const links=[];$(".movie-button-container a").each((_,el)=>{let href=($(el).attr("href")||"").trim();if(!href)return;href.startsWith("http")||(href=new URL(href,link).href);const btnText=$(el).text().trim();links.push({title:btnText,directLinks:[{link:href,title:btnText,quality:btnText.match(/1080p/i)?"1080p":btnText.match(/720p/i)?"720p":"AUTO",type:"movie"}],episodesLink:href})});return{title:title,synopsis:synopsis,image:image,imdbId:"",type:"movie",tags:tags,cast:[],rating:rating,linkList:links,extraInfo:{tagline:tagline,date:date,country:country,runtime:runtime,contentRating:contentRating}}}catch(err){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",tags:[],cast:[],rating:"",linkList:[],extraInfo:{}}}})};exports.getMeta=getMeta;