"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=void 0;const getStream=function({link:url,providerContext:providerContext}){const{axios:axios,cheerio:cheerio,commonHeaders:commonHeaders}=providerContext;return axios.get(url,{headers:commonHeaders}).then(res=>{const $=cheerio.load(res.data||""),streams=[],m3u8=$("media-player").attr("src");if(!m3u8)return[];const subtitles=[];return $("track[kind='subtitles']").each((_,el)=>{let src=$(el).attr("src");src&&(src.startsWith("/")&&(src=new URL(src,url).href),subtitles.push({title:$(el).attr("label")||"Subtitle",language:$(el).attr("srclang")||"en",type:"text/vtt",uri:src}))}),streams.push({server:"AniZone",link:m3u8,type:"m3u8"}),streams}).catch(err=>[])};exports.getStream=getStream;