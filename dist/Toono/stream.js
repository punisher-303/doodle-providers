"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;var headers={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"};const PROXY_BASE="http://localhost:3000/proxy?url=";function getStream(options){var link=options.link,providerContext=options.providerContext,signal=options.signal,directLinks=[],seen=new Set,axios=providerContext.axios,cheerio=providerContext.cheerio;return new Promise(function(resolve,reject){axios.get(link,{headers:headers,signal:signal}).then(function(res){var $=cheerio.load(res.data);if($("iframe").each(function(_,el){var src=$(el).attr("src");src&&!seen.has(src)&&(/^http/.test(src)||(src=new URL(src,link).href),seen.add(src),directLinks.push({server:"RareAnimes Iframe",link:PROXY_BASE+encodeURIComponent(src),type:"episode",quality:"auto",headers:headers}))}),$("a").each(function(_,el){var href=$(el).attr("href"),text=$(el).text().trim();href&&!seen.has(href)&&(/^http/.test(href)||(href=new URL(href,link).href),(/\.(mp4|m3u8)$/i.test(href)||/(480|720|1080|2160|4K)p?/i.test(text))&&(seen.add(href),directLinks.push({server:"RareAnimes Static",link:PROXY_BASE+encodeURIComponent(href),type:"episode",headers:headers})))}),!directLinks.length)return reject(new Error("No streams available"));resolve(directLinks)}).catch(function(err){resolve([])})})}