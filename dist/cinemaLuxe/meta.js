"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=function({link:link,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;return axios.get(link,{headers:headers}).then(response=>{var _a;const $=cheerio.load(response.data),infoContainer=$(".entry-content,.post-inner"),title=$("h1.entry-title").text().trim()||$("h2.entry-title").text().trim()||"",imdbMatch=null===(_a=infoContainer.html())||void 0===_a?void 0:_a.match(/tt\d+/),imdbId=imdbMatch?imdbMatch[0]:"",synopsis=infoContainer.find("h3:contains('SYNOPSIS'), h3:contains('synopsis')").next("p").text().trim()||"";let image=infoContainer.find("img").first().attr("src")||"";image.startsWith("//")&&(image="https:"+image);const type=/Season \d+/i.test(infoContainer.text())?"series":"movie",linkList=[];return"series"===type?infoContainer.find("h3").each((_,el)=>{const el$=$(el),seasonTitle=el$.text().trim();if(!/Season \d+/i.test(seasonTitle))return;const vcloudLinks=[];el$.nextUntil("h3").find("a").each((_,aEl)=>{var _a;const href=(null===(_a=$(aEl).attr("href"))||void 0===_a?void 0:_a.trim())||"",btnText=$(aEl).text().trim()||"";(href.includes("vcloud.lol")||btnText.includes("V-Cloud"))&&vcloudLinks.push(href)}),vcloudLinks.length>0&&linkList.push({title:seasonTitle,episodesLink:vcloudLinks[0],directLinks:vcloudLinks.map((l,i)=>({title:`Episode ${i+1}`,link:l,type:"series"}))})}):infoContainer.find("h5").each((_,h5El)=>{const el$=$(h5El),movieTitle=el$.text().trim(),directLinks=[];el$.next("p").find("a").each((_,aEl)=>{var _a;const href=(null===(_a=$(aEl).attr("href"))||void 0===_a?void 0:_a.trim())||"";href&&directLinks.push({title:movieTitle,link:href,type:"movie"})}),directLinks.length&&linkList.push({title:movieTitle,directLinks:directLinks,episodesLink:""})}),{title:title,synopsis:synopsis,image:image,imdbId:imdbId,type:type,linkList:linkList}}).catch(err=>({title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}))};exports.getMeta=getMeta;