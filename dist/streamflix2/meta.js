"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=getMeta;const DATA_URL="https://api.streamflix.app/data.json",IMAGE_BASE="https://image.tmdb.org/t/p/w500/";async function getMeta({link:link,providerContext:providerContext}){const{axios:axios}=providerContext,[type,key]=link.split(":");try{const item=(await axios.get(DATA_URL)).data.data.find(i=>i.moviekey==key);if(!item)throw new Error("Item not found");const info={title:item.moviename,image:item.movieposter?`${IMAGE_BASE}${item.movieposter}`:"",synopsis:item.moviedesc||"",imdbId:"",rating:item.movierating?item.movierating.toString():"",tags:item.movieinfo?item.movieinfo.split("/"):[],type:"tv"===type?"series":"movie",linkList:[]};if("movie"===type)info.linkList.push({title:"Movie",episodesLink:"",directLinks:[{title:"Watch",link:`movie:${item.movielink}`}]});else{let seasonCount=1;if(item.movieduration){const match=item.movieduration.match(/(\d+)\s+Season/);match&&(seasonCount=parseInt(match[1]))}for(let i=1;i<=seasonCount;i++)info.linkList.push({title:`Season ${i}`,episodesLink:`season:${key}:${i}`,directLinks:[]})}return info}catch(e){return{title:"",image:"",synopsis:"",imdbId:"",type:"movie",linkList:[]}}}