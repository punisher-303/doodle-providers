"use strict";async function getStream({link:link,type:type,signal:signal,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext,streams=[];try{let currentUrl=link,hubCloudLink="";if(currentUrl.includes("link.xdmovies.site")){const resp=await axios.get(currentUrl,{maxRedirects:0,validateStatus:null});resp.headers.location&&(currentUrl=resp.headers.location)}if(currentUrl.includes("hubdrive")){const res=await axios.get(currentUrl),href=cheerio.load(res.data)(".btn.btn-primary.btn-user.btn-success1.m-1").attr("href");href&&(hubCloudLink=href)}else hubCloudLink=(currentUrl.includes("hubcloud"),currentUrl);if(!hubCloudLink)return[];const hubRes=await axios.get(hubCloudLink);let $hub=cheerio.load(hubRes.data),finalHubUrl=hubCloudLink;if(!hubCloudLink.includes("hubcloud.php")){const downloadHref=$hub("#download").attr("href");if(downloadHref){const uri=new URL(hubCloudLink);finalHubUrl=downloadHref.startsWith("http")?downloadHref:`${uri.origin}${downloadHref.startsWith("/")?"":"/"}${downloadHref}`;const finalRes=await axios.get(finalHubUrl);$hub=cheerio.load(finalRes.data)}}const titleHeader=$hub("div.card-header").text().trim(),size=$hub("i#size").text().trim(),qualityMatch=titleHeader.match(/(\d{3,4})[pP]/),labelExtras=(qualityMatch&&qualityMatch[1],`[${size}]`),buttons=$hub("a.btn").toArray();for(const btn of buttons){const el=$hub(btn),btnLink=el.attr("href"),label=el.text().toLowerCase();if(btnLink)if(label.includes("fsl server"))streams.push({server:"FSL Server "+labelExtras,link:btnLink,type:"mkv"});else if(label.includes("download file"))streams.push({server:"Direct "+labelExtras,link:btnLink,type:"mkv"});else if(label.includes("buzzserver"))try{const buzzRes=await axios.get(btnLink+"/download",{headers:{Referer:btnLink},maxRedirects:0,validateStatus:status=>status>=200&&status<400}),redirect=buzzRes.headers["hx-redirect"]||buzzRes.headers["HX-Redirect"];redirect&&streams.push({server:"BuzzServer "+labelExtras,link:redirect,type:"mkv"})}catch(e){}else if(label.includes("pixeldra")||label.includes("pixelserver")){const parts=btnLink.split("/"),pixelApi=`https://pixeldrain.com/api/file/${parts[parts.length-1]}?download`;streams.push({server:"Pixeldrain "+labelExtras,link:pixelApi,type:"mkv"})}else if(label.includes("10gbps")){let current=btnLink;try{for(let i=0;i<3;i++){const loc=(await axios.get(current,{maxRedirects:0,validateStatus:s=>s>=300&&s<400})).headers.location;if(!loc)break;if(loc.includes("link=")){const extract=loc.split("link=")[1];if(extract){streams.push({server:"10Gbps "+labelExtras,link:extract,type:"mkv"});break}}current=loc}}catch(e){}}else label.includes("mega server")&&streams.push({server:"Mega Server "+labelExtras,link:btnLink,type:"mkv"})}}catch(err){}return streams}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;