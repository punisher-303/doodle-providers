"use strict";async function getStream({link:link,type:type,signal:signal,providerContext:providerContext}){try{const{axios:axios,cheerio:cheerio,extractors:extractors}=providerContext,headers={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36"},res=await axios.get(link,{headers:headers,signal:signal}),$=cheerio.load(res.data),streams=[],pendingStreams=[];return $("#download .links_table table tr").each((_,el)=>{const anchor=$(el).find("a");if(anchor.length>0){const url=anchor.attr("href"),rowText=$(el).text().toLowerCase();let resolution="720p";rowText.includes("1080p")?resolution="1080p":rowText.includes("480p")?resolution="480p":(rowText.includes("2160p")||rowText.includes("4k"))&&(resolution="4k"),url&&pendingStreams.push((async()=>{var _a,_b,_c;try{const linkRes=await axios.get(url,{headers:headers,maxRedirects:5,validateStatus:status=>status<400}),finalUrl=(null===(_a=linkRes.request)||void 0===_a?void 0:_a.responseURL)||(null===(_c=null===(_b=linkRes.request)||void 0===_b?void 0:_b.res)||void 0===_c?void 0:_c.responseUrl)||linkRes.headers.location||linkRes.config.url||url;if(finalUrl.includes("gdflix")||finalUrl.includes("drivebot")){(await extractors.gdFlixExtracter(finalUrl,signal)).forEach(s=>{s.server=`Mlfbd ${resolution} - ${s.server}`,streams.push(s)})}else streams.push({server:"Mlfbd "+resolution,link:finalUrl,type:"mkv"})}catch(e){}})())}}),await Promise.all(pendingStreams),streams}catch(err){return console.error("Mlfbd getStream error:",err),[]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;