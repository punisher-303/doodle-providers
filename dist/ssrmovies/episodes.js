"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=function({url:url,providerContext:providerContext}){const{axios:axios,cheerio:cheerio,commonHeaders:headers}=providerContext;return axios.get(url,{headers:headers}).then(res=>{const $=cheerio.load(res.data),container=$(".entry-content, .entry-inner").length?$(".entry-content, .entry-inner"):$("body");$(".unili-content, .code-block-1").remove();const episodes=[];return container.find("div a[href].myButton2, div a[href].myButton1, p a[href]").each((_,a)=>{var _a;const anchor=$(a),href=null===(_a=anchor.attr("href"))||void 0===_a?void 0:_a.trim(),btnText=anchor.text().trim();if(href&&(/\bepisode\s*\d+/i.test(btnText)||/e\s*\d+/i.test(btnText))){const titleMatch=btnText.match(/\bepisode\s*\d+\b/i)||btnText.match(/\bE\s*\d+\b/i),title=titleMatch?titleMatch[0]:btnText;episodes.push({title:title,link:href})}}),0===episodes.length&&container.find("h4, h3").each((_,element)=>{const el=$(element);let title=el.text().replace(/[-:]/g,"").trim();title&&el.nextUntil("h4, h3, hr").find("a[href]").each((_,a)=>{var _a;const href=null===(_a=$(a).attr("href"))||void 0===_a?void 0:_a.trim();href&&episodes.push({title:title,link:href})})}),episodes}).catch(err=>[])};exports.getEpisodes=getEpisodes;