"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=getEpisodes;const MAIN_URL="https://net20.cc",BASE_HEADERS={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36","X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/tv/home`};async function getBypassCookie(axios){try{const cookies=(await axios.post(`${MAIN_URL}/tv/p.php`,null,{headers:BASE_HEADERS})).headers["set-cookie"];if(!cookies)return"";const match=(Array.isArray(cookies)?cookies.join(";"):cookies).match(/t_hash_t=[^;]+/);return match?match[0]:""}catch(_a){return""}}async function getEpisodes({url:url,providerContext:providerContext}){var _a;const{axios:axios}=providerContext,[seriesId,seasonId]=url.split("|"),unixTime=Math.floor(Date.now()/1e3),bypass=await getBypassCookie(axios);if(!bypass)return[];const headers={...BASE_HEADERS,Cookie:`ott=pv; hd=on; ${bypass}`},episodes=[];let page=1;for(;;){const api=`${MAIN_URL}/pv/episodes.php?s=${seasonId}&series=${seriesId}&t=${unixTime}&page=${page}`,data=(await axios.get(api,{headers:headers})).data;if((null!==(_a=data.episodes)&&void 0!==_a?_a:[]).forEach(ep=>{episodes.push({title:`E${ep.ep.replace("E","")} - ${ep.t}`,link:ep.id,image:`https://imgcdn.kim/pvepimg/150/${ep.id}.jpg`})}),0===data.nextPageShow)break;page++}return episodes}