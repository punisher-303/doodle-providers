"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=void 0;const getStream=async function({link:url,providerContext:providerContext}){var _a;const{axios:axios}=providerContext,streamLinks=[];try{if(url.includes("strmup.to")){const filecode=url.split("/").pop();if(filecode){const apiUrl=`https://strmup.to/ajax/stream?filecode=${filecode}`,res=await axios.get(apiUrl,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36","X-Requested-With":"XMLHttpRequest",Referer:url}});(null===(_a=res.data)||void 0===_a?void 0:_a.streaming_url)&&streamLinks.push({server:"Strmup",link:res.data.streaming_url,type:"m3u8"})}}}catch(err){}const dataMatch=url.match(/\/video\/([a-fA-F0-9]+)/),dataId=dataMatch?dataMatch[1]:null;if(!dataId)return streamLinks;const apiUrl=`${url.split("/").slice(0,3).join("/")}/player/index.php?data=${dataId}&do=getVideo`,headers={accept:"*/*","accept-language":"en-US,en;q=0.9,en-IN;q=0.8","cache-control":"no-cache","content-type":"application/x-www-form-urlencoded; charset=UTF-8",pragma:"no-cache","x-requested-with":"XMLHttpRequest",Referer:url,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36",cookie:"fireplayer_player=tlare70v164jv3taph4r8v4qer; ext_name=ojplmecpdpgccookcobabopnaifgidhf"},postBody=`hash=${dataId}&r=`;try{const responseData=(await axios.post(apiUrl,postBody,{headers:headers})).data;let streamUrl;if("string"==typeof responseData){const match=responseData.match(/https?:\/\/[^\s"]+\.m3u8[^\s"]*/);streamUrl=null==match?void 0:match[0]}else if("object"==typeof responseData)for(const value of Object.values(responseData))if("string"==typeof value&&value.includes(".m3u8")){streamUrl=value;break}streamUrl&&streamLinks.push({server:"AniHub",link:streamUrl,type:"m3u8"})}catch(err){}return streamLinks};exports.getStream=getStream;