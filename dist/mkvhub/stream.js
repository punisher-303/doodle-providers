"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-store",DNT:"1","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"};async function extractInnerCloudLink(url,axios,cheerio,signal){const html=(await axios.get(url,{headers:headers,signal:signal})).data||"",$=cheerio.load(html),links=[];$("a[href]").each((_,el)=>{const href=$(el).attr("href");href&&href.startsWith("http")&&links.push(href)});const hubcloud=links.find(l=>/hubcloud/i.test(l));if(hubcloud)return hubcloud;const directCloud=links.find(l=>/direct-cloud/i.test(l));if(directCloud)return directCloud;const fallback=links.find(l=>/(uploadflix|filepress|drive|gdrive)/i.test(l));return fallback||null}async function getStream({link:link,type:type,signal:signal,providerContext:providerContext}){const{axios:axios,cheerio:cheerio,extractors:extractors}=providerContext,{hubcloudExtracter:hubcloudExtracter}=extractors;try{if(/hubcloud/i.test(link))return await hubcloudExtracter(link,signal);if(/linkszilla|watch-online|uploadflix|direct-cloud/i.test(link)){const inner=await extractInnerCloudLink(link,axios,cheerio,signal);return inner?await hubcloudExtracter(inner,signal):[]}const pageRes=await axios.get(link,{headers:headers,signal:signal}),vdMatch=(pageRes.data||"").match(/<a\s+id=["']vd["']\s+href=["']([^"']+)["']/i);return(null==vdMatch?void 0:vdMatch[1])?[{server:"googleusercontent",link:vdMatch[1],type:"mp4"}]:await hubcloudExtracter(link,signal)}catch(err){return[]}}