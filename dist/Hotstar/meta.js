"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=getMeta;const MAIN_URL="https://net20.cc",API_BASE=`${MAIN_URL}/mobile/hs`,USER_AGENT="Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36",USER_TOKEN="233123f803cf02184bf6c67e149cdd50",BASE_HEADERS={"User-Agent":USER_AGENT,"X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/home`,Cookie:`ott=hs; hd=on; user_token=${USER_TOKEN};`};async function getBypassCookie(axios){try{const setCookie=(await axios.post(`${MAIN_URL}/tv/p.php`,null,{headers:BASE_HEADERS})).headers["set-cookie"];if(setCookie){const match=(Array.isArray(setCookie)?setCookie.join(";"):setCookie).match(/t_hash_t=[^;]+/);if(match)return match[0]}}catch(e){}return""}async function getMeta({link:link,providerContext:providerContext}){const{axios:axios}=providerContext,id=link,unixTime=Math.floor(Date.now()/1e3),tHash=await getBypassCookie(axios),headers={...BASE_HEADERS,Cookie:`${BASE_HEADERS.Cookie} ${tHash}`};try{const data=(await axios.get(`${API_BASE}/post.php?id=${id}&t=${unixTime}`,{headers:headers})).data,title=(null==data?void 0:data.title)||"",desc=(null==data?void 0:data.desc)||"",image=`https://imgcdn.kim/hs/v/${id}.jpg`,hasEpisodes=Array.isArray(null==data?void 0:data.episodes)&&data.episodes.length>0&&null!==data.episodes[0],info={title:title,synopsis:desc,image:image,imdbId:"",type:hasEpisodes?"series":"movie",linkList:[]};if(!hasEpisodes)return info.linkList.push({title:"â–¶ Play Movie",quality:"HD",episodesLink:"",directLinks:[{title:"Default Server",link:`${id}|${title}`}]}),info;return(Array.isArray(null==data?void 0:data.season)?data.season:[]).forEach((s,index)=>{var _a;const seasonId=null!==(_a=null==s?void 0:s.id)&&void 0!==_a?_a:`${index+1}`,seasonNumber=index+1;info.linkList.push({title:`Season ${seasonNumber}`,quality:"Default",episodesLink:`${id}|${seasonId}|${title}|series`,directLinks:[]})}),info}catch(e){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}}