"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-store",DNT:"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"},getMeta=({link:link,providerContext:providerContext})=>{const{axios:axios,cheerio:cheerio}=providerContext,baseUrl=link.split("/").slice(0,3).join("/"),empty={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]};return axios.get(link,{headers:{...headers,Referer:baseUrl}}).then(({data:data})=>{const $=cheerio.load(data),body=$(".entry-inner, .entry-content, .post-inner").first();const title=($("h1").first().text().trim()||$("h2").first().text().trim()||$("h3:contains('Download')").first().text().trim()).replace(/download/gi,"").replace(/\(\d{4}\)/g,"").replace(/season\s*\d+|s\d+|episode\s*\d+|e\d+/gi,"").replace(/\b(480p|720p|1080p|2160p|4k|hdr|bluray|web\-dl|webrip|dvdrip|x264|hevc)\b/gi,"").replace(/\b(hindi|english|tamil|telugu|malayalam|dual audio|multi audio|ddp?|aac)\b/gi,"").replace(/\b(netflix|amazon prime|prime video|hotstar|jiohotstar|zee5|sony liv|apple tv)\b/gi,"").replace(/[~|–—]/g," ").replace(/\[.*?\]|\{.*?\}/g,"").replace(/[()]/g,"").replace(/\s{2,}/g," ").trim();let image=body.find("img[data-src]").first().attr("data-src")||body.find("img[src]").first().attr("src")||"";image.startsWith("//")&&(image="https:"+image);let synopsis="";body.find("p").each((_,el)=>{const text=$(el).text().trim();text.length>50&&0===$(el).find("a").length&&!synopsis&&(synopsis=text)}),synopsis||(synopsis=body.find("h3:contains('SYNOPSIS')").next("p").text().trim()||"");const info={title:title||"Unknown",synopsis:synopsis,image:image,imdbId:"",type:/season|episode/i.test(data)?"series":"movie",linkList:[]},links=[];return body.find("h3, h5, h4").each((_,el)=>{var _a;const qualityTitle=$(el).text().trim();if(!/\d+p/i.test(qualityTitle))return;const quality=(null===(_a=qualityTitle.match(/\d+p/i))||void 0===_a?void 0:_a[0])||"",directLinks=[];let mainEpisodeLink="";$(el).nextUntil("h3, h5, h4").find("a[href]").each((_,a)=>{const $a=$(a),href=$a.attr("href")||"";let text=$a.text().trim();text||(text=$a.find("button").text().trim()),text||(text=$a.attr("title")||"Download");const isMirror=/mirror/i.test(text)||$a.hasClass("dld"),isZip=/zip/i.test(text)||text.includes("Zip"),isFast=/fast/i.test(text)||text.includes("Fast");(isMirror||isZip||isFast)&&(directLinks.push({title:text,link:href,type:"series"}),(isMirror||!mainEpisodeLink&&isFast)&&(mainEpisodeLink=href))}),directLinks.length&&links.push({title:qualityTitle.replace(/{.*?}/g,"").trim(),quality:quality,episodesLink:mainEpisodeLink||directLinks[0].link,directLinks:directLinks})}),info.linkList=links,info}).catch(err=>empty)};exports.getMeta=getMeta;