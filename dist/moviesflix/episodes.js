"use strict";function base64Decode(str){try{const cleanedStr=str.replace(/\s/g,"");return decodeURIComponent(atob(cleanedStr).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(e){return""}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=function({url:url,providerContext:providerContext}){const{axios:axios,cheerio:cheerio,commonHeaders:headers}=providerContext;return axios.get(url,{headers:headers}).then(res=>{let encoded="";const $page=cheerio.load(res.data);if($page("script").each((_,el)=>{const match=($page(el).html()||"").match(/const\s+encoded\s*=\s*"([^"]+)"/);match&&(encoded=match[1])}),!encoded)return[];const decodedHtml=base64Decode(encoded);if(!decodedHtml)return[];const $=cheerio.load(decodedHtml),episodes=[];$("h4").each((_,el)=>{const epMatch=$(el).text().trim().match(/Episode:\s*(\d+)/i);if(!epMatch)return;const baseTitle=`Episode ${epMatch[1].padStart(2,"0")}`;$(el).next("p").find("a[href]").each((_,a)=>{const link=$(a).attr("href");if(!link)return;const l=link.toLowerCase();let provider="Unknown";l.includes("mcloud")?provider="M-Cloud":l.includes("vcloud")?provider="V-Cloud":l.includes("mega.nz")?provider="Mega":l.includes("filepress")?provider="Filepress":l.includes("dropgalaxy")&&(provider="DropGalaxy"),episodes.push({title:`${baseTitle} (${provider})`,link:link})})});const unique=new Map;return episodes.forEach(ep=>{unique.has(ep.link)||unique.set(ep.link,ep)}),Array.from(unique.values())}).catch(err=>[])};exports.getEpisodes=getEpisodes;