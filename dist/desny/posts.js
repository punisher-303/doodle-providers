"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const MAIN_URL="https://net20.cc",UA="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36";async function getBypassCookie(axios){try{const sc=(await axios.post(`${MAIN_URL}/tv/p.php`,null,{headers:{"User-Agent":UA,"X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/`,Cookie:"ott=dp; hd=on;"}})).headers["set-cookie"];if(sc){const match=(Array.isArray(sc)?sc.join(";"):sc).match(/t_hash_t=[^;]+/);if(match)return match[0]}}catch(_a){}return""}function mapFilterToQuery(filter){switch(filter){case"movie":return"movie";case"show":return"series";case"10":return"10";default:return"h"}}async function getPosts({filter:filter,providerContext:providerContext}){var _a;const{axios:axios}=providerContext,t=Math.floor(Date.now()/1e3),tHash=await getBypassCookie(axios);if(!tHash)return[];const query=mapFilterToQuery(filter),res=await axios.get(`${MAIN_URL}/mobile/hs/search.php`,{params:{s:query,t:t},headers:{"User-Agent":UA,"X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/home`,Cookie:`${tHash}; ott=dp; hd=on`}});return(null===(_a=res.data)||void 0===_a?void 0:_a.searchResult)?res.data.searchResult.map(it=>({title:it.t,link:it.id,image:`https://imgcdn.kim/hs/v/${it.id}.jpg`})):[]}async function getSearchPosts({searchQuery:searchQuery,providerContext:providerContext}){var _a;const{axios:axios}=providerContext,t=Math.floor(Date.now()/1e3),tHash=await getBypassCookie(axios);if(!tHash)return[];const res=await axios.get(`${MAIN_URL}/mobile/hs/search.php`,{params:{s:searchQuery,t:t},headers:{"User-Agent":UA,"X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/home`,Cookie:`${tHash}; ott=dp; hd=on`}});return(null===(_a=res.data)||void 0===_a?void 0:_a.searchResult)?res.data.searchResult.map(it=>({title:it.t,link:it.id,image:`https://imgcdn.kim/hs/v/${it.id}.jpg`})):[]}