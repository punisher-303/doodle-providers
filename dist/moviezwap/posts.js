"use strict";function extractMovieName(title){const match=title.match(/^(.*?)\s*\(/);return match?match[1].trim():title.split("Hindi")[0].trim()}async function fetchPoster(movieName){try{if(!movieName)return"";const url=`https://v2.sg.media-imdb.com/suggestion/${movieName.charAt(0).toLowerCase()}/${encodeURIComponent(movieName)}.json`,res=await fetch(url),data=await res.json();if(data&&data.d&&data.d.length>0){const movie=data.d.find(item=>{var _a;return null===(_a=item.i)||void 0===_a?void 0:_a.imageUrl});if(movie&&movie.i&&movie.i.imageUrl)return movie.i.imageUrl}}catch(e){}return""}async function posts({url:url,signal:signal,cheerio:cheerio}){try{const res=await fetch(url,{signal:signal}),data=await res.text(),$=cheerio.load(data),catalog=[];$('a[href^="/movie/"]').each((i,el)=>{const title=$(el).text().trim(),link=$(el).attr("href");title&&link&&catalog.push({title:title,link:link,image:""})});for(const post of catalog){const movieName=extractMovieName(post.title);post.image=await fetchPoster(movieName)}return catalog}catch(err){return[]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchPosts=exports.getPosts=void 0;const getPosts=async function({filter:filter,page:page,signal:signal,providerContext:providerContext}){const{getBaseUrl:getBaseUrl,cheerio:cheerio}=providerContext;return posts({url:`${await getBaseUrl("moviezwap")}${filter}`,signal:signal,cheerio:cheerio})};exports.getPosts=getPosts;const getSearchPosts=async function({searchQuery:searchQuery,page:page,signal:signal,providerContext:providerContext}){const{getBaseUrl:getBaseUrl,cheerio:cheerio}=providerContext;return posts({url:`${await getBaseUrl("moviezwap")}/search.php?q=${encodeURIComponent(searchQuery)}`,signal:signal,cheerio:cheerio})};exports.getSearchPosts=getSearchPosts;