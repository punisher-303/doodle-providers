"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","sec-ch-ua":'"Not_A Brand";v="8", "Chromium";v="120", "Microsoft Edge";v="120"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"Sec-Fetch-Dest":"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1",Cookie:"xla=s4t; _ga=GA1.1.1081149560.1756378968; _ga_BLZGKYN5PF=GS2.1.s1756378968$o1$g1$t1756378984$j44$l0$h0","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0"},getMeta=async function({link:link,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext,url=link,baseUrl=url.split("/").slice(0,3).join("/"),emptyResult={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]};try{const response=await axios.get(url,{headers:{...headers,Referer:baseUrl}}),$=cheerio.load(response.data),contentEl=$(".thecontent"),topText=contentEl.html()||"",result={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]},isSeries=/Network:/i.test(topText)||/Series:/i.test(topText)||/CID \(\d{4}\)/i.test(topText);result.type=isSeries?"series":"movie";let seasonNumber="";if("series"===result.type){let rawTitle=contentEl.find("strong").first().text().trim()||"";rawTitle=rawTitle.replace(/\s+\d+p.*$/i,"").trim(),result.title=rawTitle;const seasonMatch=result.title.match(/(S\d+)/i);seasonNumber=seasonMatch?seasonMatch[1].toUpperCase():"",result.title=result.title.replace(/\s(S\d+)/i,"").trim()}else{let rawTitle=$("strong").first().text()||"";const titleMatch=rawTitle.match(/^([^)]+\s*\(\d{4}\))/);result.title=titleMatch?titleMatch[1].trim():rawTitle.split(")")[0]+")",result.title=result.title.replace(/\s+AMZN.*$/i,"").trim()}result.title||(result.title=$("title").text().split("|")[0].trim()),result.imdbId="";let synopsis="";const summaryMatch=topText.match(/(?:Stars: .*?)\s*<br\s*\/?>\s*([^<]+)\s*<span/i);summaryMatch&&summaryMatch[1]&&(synopsis=summaryMatch[1].trim()),result.synopsis=synopsis||"Synopsis not found.";let image=contentEl.find("img").first().attr("src")||"";image.startsWith("//")&&(image="https:"+image),result.image=image;const links=[];let episodeCounter=1,currentEpisodeNumber="";const downloadButtons=$("a[class*='emd_dl_']");contentEl.contents();return downloadButtons.each((index,element)=>{const btnEl=$(element),fullLinkText=btnEl.text().trim(),linkUrl=btnEl.attr("href");if(linkUrl){const qualityMatch=fullLinkText.match(/in (\d+p)/i),quality=qualityMatch?qualityMatch[1]:"Unknown",sizeMatch=fullLinkText.match(/-\s*([0-9\.]+G?M?B)/i),size=sizeMatch?sizeMatch[1]:"Unknown Size";let linkTitle,directLinkType="movie";if("series"===result.type){directLinkType="episode";let epMatch=btnEl.prev().prev().text().trim().match(/Episode\s*(\d+)/i)||fullLinkText.match(/Episode\s*(\d+)/i);currentEpisodeNumber=epMatch?`E${epMatch[1]}`:`E${episodeCounter}`;linkTitle=fullLinkText.match(/(\d{4})\s*\)/)?`${fullLinkText.replace(/\)$/,`) ${currentEpisodeNumber}`)}`:`${result.title} ${currentEpisodeNumber} (${quality} ${size})`,("1080p"===quality||"Unknown"===quality&&index%3==0)&&episodeCounter++,links.push({title:linkTitle,quality:quality,episodesLink:linkUrl,directLinks:[{title:`${result.title} ${currentEpisodeNumber} - Watch & Download (${size})`,link:linkUrl,type:directLinkType}]})}else linkTitle=`${result.title} (${quality} ${size})`,directLinkType="movie",links.push({title:linkTitle,quality:quality,episodesLink:linkUrl,directLinks:[{title:`Watch & Download (${size})`,link:linkUrl,type:directLinkType}]})}}),result.linkList=links,result}catch(err){return emptyResult}};exports.getMeta=getMeta;