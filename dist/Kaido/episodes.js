"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEpisodes=void 0;const getEpisodes=function({url:url,providerContext:providerContext}){const{axios:axios,cheerio:cheerio,commonHeaders:commonHeaders}=providerContext,match=url.match(/-(\d+)$/),animeId=match?match[1]:null;if(!animeId)return Promise.resolve([]);const ajaxUrl=`https://kaido.to/ajax/episode/list/${animeId}`;return axios.get(ajaxUrl,{headers:commonHeaders}).then(res=>{const data=res.data;let htmlContent="";if("object"==typeof data&&data.html)htmlContent=data.html;else{if("string"!=typeof data)return[];htmlContent=data}const $=cheerio.load(htmlContent),episodes=[];return $(".ssl-item").each((_,el)=>{const ep=$(el);let title=ep.attr("title")||ep.find(".ep-name").text().trim(),link=ep.attr("href")||"";link&&(link.startsWith("http")||(link="https://kaido.to"+link),episodes.push({title:title,link:link}))}),episodes}).catch(err=>[])};exports.getEpisodes=getEpisodes;