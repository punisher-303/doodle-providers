"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const commonHeaders={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"*/*"},gofileHeaders={"User-Agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36",Referer:"https://gofile.io/",Accept:"*/*","Accept-Encoding":"identity",Range:"bytes=0-"};async function getStream({link:link,type:type,signal:signal,providerContext:providerContext}){var _a;const{axios:axios,cheerio:cheerio}=providerContext;try{const streams=[],res=await axios.get(link,{headers:commonHeaders,signal:signal}),$=cheerio.load(res.data||""),links=[];$(".entry-content .well a").each((_,el)=>{const href=$(el).attr("href")||"";(href.includes("pixeldrain.com/u/")||href.includes("gofile.io/d/"))&&links.push(href)});for(const url of links){if(url.includes("pixeldrain.com/u/")){const fileId=url.split("/u/")[1];if(!fileId)continue;streams.push({server:"pixeldrain",type:"mkv",link:`https://pixeldrain.com/api/file/${fileId}`})}if(url.includes("gofile.io/d/")){const code=url.split("/d/")[1];if(!code)continue;try{const apiUrl=`https://api.gofile.io/contents/${code}?page=1&pageSize=1000`,data=(await axios.get(apiUrl,{headers:commonHeaders,signal:signal})).data;if("ok"===(null==data?void 0:data.status)&&(null===(_a=null==data?void 0:data.data)||void 0===_a?void 0:_a.children)){const children=data.data.children;for(const key in children){const file=children[key];(null==file?void 0:file.link)&&streams.push({server:"gofile",type:"mkv",link:file.link,headers:gofileHeaders})}}}catch(err){}}}return streams}catch(error){return[]}}