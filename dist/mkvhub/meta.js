"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9",DNT:"1","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=function({link:link,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;return axios.get(link,{headers:headers}).then(response=>{var _a,_b,_c;const $=cheerio.load(response.data),infoContainer=$(".page-body"),title=$("h1.page-title .material-text").text().trim()||"",imdbMatch=null===(_a=infoContainer.html())||void 0===_a?void 0:_a.match(/tt\d+/),imdbId=imdbMatch?imdbMatch[0]:"",synopsisContent=(null===(_c=null===(_b=infoContainer.find("p").filter((i,el)=>$(el).text().includes("IMDb Rating:")&&$(el).text().includes("Cast:")).html())||void 0===_b?void 0:_b.split("<br />")[5])||void 0===_c?void 0:_c.trim())||"",synopsis=synopsisContent.startsWith("During a critical rescue operation")?synopsisContent:"";let image=infoContainer.find(".poster img").first().attr("src")||"";image.startsWith("//")&&(image="https:"+image);const type=infoContainer.text().includes("Episode")?"series":"movie",linkList=[];if("series"===type)infoContainer.find("h3:contains('Episode')").each((_,episodeH3El)=>{var _a;const episodeEl$=$(episodeH3El),episodeTitle=episodeEl$.text().trim().replace(/\|\|/g,"").trim();if(!episodeTitle)return;const directLinks=[];let currentEl=episodeEl$.next(),currentQualityTitle="";for(;currentEl.length&&!currentEl.is("h3:contains('Episode')");){if(currentEl.is("h3")){currentQualityTitle=currentEl.text().trim().replace(/\|\|/g,"").trim();const downloadAnchor=currentEl.next("p").find("a.dbuttn");if(downloadAnchor.length){const href=(null===(_a=downloadAnchor.attr("href"))||void 0===_a?void 0:_a.trim())||"";href&&directLinks.push({title:currentQualityTitle,link:href,type:"episode"})}}currentEl=currentEl.next()}directLinks.length>0&&linkList.push({title:episodeTitle,directLinks:directLinks,episodesLink:directLinks[0].link})});else{const groupedLinks={};infoContainer.find("h3").each((_,h3El)=>{const el$=$(h3El),h3Text=el$.text().trim().replace(/\|\||\s/g,"");if(!h3Text.includes("Download")||h3Text.includes("Episode"))return;const directLinks=[];if(el$.next("p").find("a.dbuttn").each((_,aEl)=>{var _a,_b;const href=(null===(_a=$(aEl).attr("href"))||void 0===_a?void 0:_a.trim())||"";if(href){const linkTitle=(null===(_b=h3Text.match(/(\d+p.+?GB)/i))||void 0===_b?void 0:_b[0])||h3Text;directLinks.push({title:linkTitle,link:href,type:"movie"})}}),directLinks.length){const links=directLinks||[],key=links.some(l=>l.title.includes("720p"))?"720p Links":links.some(l=>l.title.includes("1080p"))?"1080p Links":"Other Links";groupedLinks[key]||(groupedLinks[key]=[]),groupedLinks[key].push(...links)}}),Object.entries(groupedLinks).forEach(([key,links])=>{links&&links.length>0&&linkList.push({title:key,directLinks:links,episodesLink:""})})}return{title:title,synopsis:synopsis,image:image,imdbId:imdbId,type:type,linkList:linkList}}).catch(err=>({title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}))};exports.getMeta=getMeta;