"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStream=getStream;const headers={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",Accept:"text/html"};function base64DecodeUnicode(str){try{return decodeURIComponent(atob(str).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(_a){return""}}async function getStream({link:link,type:type,signal:signal,providerContext:providerContext}){const{axios:axios,extractors:extractors}=providerContext,{hubcloudExtracter:hubcloudExtracter}=extractors;if(link.includes("mcloud.mom"))return hubcloudExtracter(link,signal).catch(()=>[]);if(link.includes("mobilejsr.lol"))try{const res=await axios.get(link,{headers:headers,signal:signal}),encodedMatch=res.data.match(/const\s+encoded\s*=\s*"([^"]+)"/);if(!encodedMatch)return[];const decodedHtml=base64DecodeUnicode(encodedMatch[1]);if(!decodedHtml)return[];const mcloudMatch=decodedHtml.match(/https?:\/\/mcloud\.mom\/[a-zA-Z0-9_-]+/);if(!mcloudMatch)return[];return hubcloudExtracter(mcloudMatch[0],signal).catch(()=>[])}catch(err){return[]}return[]}