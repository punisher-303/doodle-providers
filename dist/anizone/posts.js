"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const defaultHeaders={Referer:"https://anizone.to","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"};function getPosts({page:page=1,signal:signal,providerContext:providerContext}){return fetchPosts({page:page,signal:signal,providerContext:providerContext})}function getSearchPosts({searchQuery:searchQuery,page:page=1,signal:signal,providerContext:providerContext}){return fetchPosts({query:searchQuery,page:page,signal:signal,providerContext:providerContext})}function fetchPosts({query:query,page:page=1,signal:signal,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext,baseUrl="https://anizone.to";let url=baseUrl;return query&&query.trim()?url=`${baseUrl}/anime?search=${encodeURIComponent(query.trim())}${page>1?`&page=${page}`:""}`:page>1&&(url=`${baseUrl}?page=${page}`),axios.get(url,{headers:defaultHeaders,signal:signal}).then(res=>{const $=cheerio.load(res.data||""),posts=[],seen=new Set,resolveUrl=href=>href.startsWith("http")?href:new URL(href,baseUrl).href;return $('[wire\\:key^="a-"]').each((_,el)=>{var _a,_b;const item=$(el),anchor=item.find("a[wire\\:navigate]").first(),link=anchor.attr("href");if(!link)return;let title=anchor.attr("title")||item.find("div.line-clamp-2 a").text()||anchor.text();title=null===(_b=null===(_a=null==title?void 0:title.replace(/&quot;/g,'"'))||void 0===_a?void 0:_a.replace(/^"|"$/g,""))||void 0===_b?void 0:_b.trim();const img=item.find("img").attr("src");if(link&&title&&img){const fullLink=resolveUrl(link);seen.has(fullLink)||(posts.push({title:title,link:fullLink,image:resolveUrl(img)}),seen.add(fullLink))}}),posts}).catch(err=>[])}