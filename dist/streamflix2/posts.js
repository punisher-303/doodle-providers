"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const DATA_URL="https://api.streamflix.app/data.json",IMAGE_BASE="https://image.tmdb.org/t/p/w500/";async function getPosts({filter:filter,providerContext:providerContext}){const{axios:axios}=providerContext;try{const data=(await axios.get(DATA_URL)).data.data;let items=data;return"movies"===filter?items=data.filter(i=>!i.isTV&&i.moviename):"tv"===filter&&(items=data.filter(i=>i.isTV&&i.moviename)),items.slice(0,50).map(item=>({title:item.moviename,image:item.movieposter?`${IMAGE_BASE}${item.movieposter}`:"",link:`${item.isTV?"tv":"movie"}:${item.moviekey}`}))}catch(e){return[]}}async function getSearchPosts({searchQuery:searchQuery,providerContext:providerContext}){const{axios:axios}=providerContext;try{const data=(await axios.get(DATA_URL)).data.data,query=searchQuery.toLowerCase();return data.filter(item=>item.moviename&&item.moviename.toLowerCase().includes(query)||item.movieinfo&&item.movieinfo.toLowerCase().includes(query)).map(item=>({title:item.moviename,image:item.movieposter?`${IMAGE_BASE}${item.movieposter}`:"",link:`${item.isTV?"tv":"movie"}:${item.moviekey}`}))}catch(e){return[]}}