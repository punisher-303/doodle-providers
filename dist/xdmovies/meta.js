"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const getMeta=async function({link:link,providerContext:providerContext}){const{axios:axios,cheerio:cheerio}=providerContext;try{const response=await axios.get(link),$=cheerio.load(response.data),title=$("div.info").find("h2").text().trim(),poster=$("div.details-wrapper").find("img").attr("src")||"",description=(($("#movie-header").attr("style")||"").match(/url\('([^']+)'\)/),$("p.overview").text().trim()),tags=$("p:contains('Genres:') a").map((_,el)=>$(el).text().trim()).get(),type="movie"===(link.includes("/anime/")?"anime":link.includes("/tv/")||link.includes("/series/")?"series":"movie")?"movie":"series",result={title:title,synopsis:description,image:poster,imdbId:"",type:type,tags:tags,linkList:[]},links=[];if("movie"===type)$("div.download-item a").each((_,el)=>{var _a;const href=null===(_a=$(el).attr("href"))||void 0===_a?void 0:_a.trim(),text=$(el).text().trim()||"Download";href&&links.push({title:text,directLinks:[{title:"Download",link:href}]})});else{$("div.season-section").each((_,section)=>{const sectionEl=$(section);let seasonLabel="Season";const seasonMatch=sectionEl.find("button.toggle-season-btn").text().trim().match(/Season\s*(\d+)/i);seasonMatch&&(seasonLabel=`Season ${seasonMatch[1]}`),sectionEl.find(".packs-grid .pack-card").each((idx,pack)=>{var _a;const href=null===(_a=$(pack).find("a.download-button").attr("href"))||void 0===_a?void 0:_a.trim(),text=`${seasonLabel} Pack ${idx+1}`;href&&links.push({title:text,directLinks:[{title:"Download",link:href}]})}),sectionEl.find(".download-item a").each((_,el)=>{var _a;const href=null===(_a=$(el).attr("href"))||void 0===_a?void 0:_a.trim(),text=$(el).text().trim()||`${seasonLabel} Link`;href&&links.push({title:text,directLinks:[{title:"Download",link:href}]})})}),$("div.download-item a").each((_,el)=>{var _a;const href=null===(_a=$(el).attr("href"))||void 0===_a?void 0:_a.trim();if(href&&!links.some(l=>{var _a,_b;return(null===(_b=null===(_a=l.directLinks)||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.link)===href})){const text=$(el).text().trim()||"Download";links.push({title:text,directLinks:[{title:"Download",link:href}]})}})}return result.linkList=links,result}catch(err){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}};exports.getMeta=getMeta;