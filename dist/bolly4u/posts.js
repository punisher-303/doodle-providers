"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPosts=getPosts,exports.getSearchPosts=getSearchPosts;const scrapingHeaders={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Cookie:"_ga=GA1.1.924482842.1765433313; cf_clearance=Y.tdJJL.L0bpWcmgBlHQKzYS6R47mTs4tjY8Lh_igpM-1765440206-1.2.1.1-Eyhc.8DkjagnY6nix9ZvG_bY90Tk0774UoVeDTRx2wwTfYyvlsa9_B6CKRn2JeBiYnzTSOHnnSkbQCPKUGYNAuvpwnQUJdL0_yeNXeoSlaUPFL5_V5WyTtDWL7mNGrxvv2IwAR4dQX2qiB_SN2PyghGcF5BruXCY9kBJtyf3PzTf.TheNwvWOMuho3iM97bHepWd88hUv3PKcncmgZDhKrvXQfhdk.rsN7bR5fXlMz4; prefetchAd_9970961=true; _ga_DF9BTRQL6V=GS2.1.s1765433312$o1$g1$t1765440456$j60$l0$h0; cf_chl_rc_ni=1",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Alt-Used":"vegamovies.ks.ua"};async function getPosts({filter:filter,page:page=1,signal:signal,providerContext:providerContext}){return fetchPosts({filter:filter,page:page,query:"",signal:signal,providerContext:providerContext})}async function getSearchPosts({searchQuery:searchQuery,page:page=1,signal:signal,providerContext:providerContext}){return fetchPosts({filter:"",page:page,query:searchQuery,signal:signal,providerContext:providerContext})}async function fetchPosts({filter:filter,query:query,page:page=1,signal:signal,providerContext:providerContext}){try{const{getBaseUrl:getBaseUrl,axios:axios,cheerio:cheerio}=providerContext,baseUrl=await getBaseUrl("bolly4u");let url;url=(null==query?void 0:query.trim())?`${baseUrl}/${page>1?`page/${page}/`:""}?s=${encodeURIComponent(query)}`:filter?`${baseUrl}/${filter.replace(/^\/|\/$/g,"")}/${page>1?`page/${page}/`:""}`:`${baseUrl}/${page>1?`page/${page}/`:""}`;const res=await axios.get(url,{headers:scrapingHeaders,signal:signal}),$=cheerio.load(res.data||""),catalog=[],seen=new Set;return $("article.post-item").each((_,el)=>{const card=$(el);let link=card.find(".entry-title a").attr("href")||card.find(".blog-img").attr("href")||"";if(!link||link.includes("#"))return;if(link.startsWith("http")||(link=new URL(link,baseUrl).href),seen.has(link))return;let title=card.find(".entry-title a").text().trim()||card.find(".blog-img").attr("title")||"";title=title.replace(/Download\s+/gi,"").replace(/S\d+E\d+\s+Added!/gi,"").replace(/\{.*?\}/g,"").replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/\s{2,}/g," ").trim();const imgTag=card.find(".blog-pic img");let image=imgTag.attr("src")||imgTag.attr("data-src")||imgTag.attr("data-lazy-src")||"";image&&!image.startsWith("http")&&(image=new URL(image,baseUrl).href),title&&link&&(seen.add(link),catalog.push({title:title,link:link,image:image}))}),catalog}catch(err){return[]}}