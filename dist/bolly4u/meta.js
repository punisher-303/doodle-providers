"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Referer:"https://google.com","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=async function({link:link,providerContext:providerContext}){var _a,_b;const{axios:axios,cheerio:cheerio}=providerContext;try{const res=await axios.get(link,{headers:headers}),$=cheerio.load(res.data),title=$(".sheader h1").first().text().trim()||(null===(_a=$("meta[property='og:title']").attr("content"))||void 0===_a?void 0:_a.trim())||"";let image=$(".sheader .poster img").attr("src")||$(".sheader .poster img").attr("data-src")||$("meta[property='og:image']").attr("content")||"";image&&!image.startsWith("http")&&(image=new URL(image,link).href);const tagline=$(".sheader .tagline").text().trim(),date=$(".sheader .date").text().trim(),country=$(".sheader .country").text().trim(),runtime=$(".sheader .runtime").text().trim(),contentRating=$(".sheader .rated").text().trim(),rating=$(".starstruck-rating span[itemprop='ratingValue']").text().trim()||"";let synopsis="";$("#info .wp-content p").each((_,el)=>{const txt=$(el).text().trim();if(txt&&txt.length>30&&!/watch online|download|share|support/i.test(txt))return synopsis=txt,!1}),synopsis||(synopsis=(null===(_b=$("meta[name='description']").attr("content"))||void 0===_b?void 0:_b.trim())||"No synopsis available.");const tags=[];$(".sgeneros a").each((_,el)=>{const txt=$(el).text().trim();txt&&tags.push(txt)});const links=[];$("h3 a, .movie_button a, .movie_button_container a, .download-links a, .dl-box a").each((_,el)=>{let href=($(el).attr("href")||"").trim();if(!href)return;href.startsWith("http")||(href=new URL(href,link).href);let btnText=($(el).text()||"").trim();btnText=btnText.replace(/[\n\r]+/g," ").replace(/\s{2,}/g," ").trim();const match=btnText.match(/Episode\s*\d+|480p|720p|1080p/i);if(!match)return;btnText=match[0],btnText=`${btnText} â€“ ${title}`;let quality="AUTO";/1080p/i.test(btnText)?quality="1080p":/720p/i.test(btnText)?quality="720p":/480p/i.test(btnText)&&(quality="480p"),links.push({title:btnText,directLinks:[{link:href,title:btnText,quality:quality,type:"movie"}],episodesLink:href})});return{title:title,synopsis:synopsis,image:image,imdbId:"",type:"movie",tags:tags,cast:[],rating:rating,linkList:links,extraInfo:{tagline:tagline,date:date,country:country,runtime:runtime,contentRating:contentRating}}}catch(err){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",tags:[],cast:[],rating:"",linkList:[],extraInfo:{}}}};exports.getMeta=getMeta;