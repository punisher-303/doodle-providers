"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=getMeta;const MAIN_URL="https://net20.cc",BASE_HEADERS={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36","X-Requested-With":"XMLHttpRequest",Referer:`${MAIN_URL}/tv/home`};async function getBypassCookie(axios){try{const cookies=(await axios.post(`${MAIN_URL}/tv/p.php`,null,{headers:BASE_HEADERS})).headers["set-cookie"];if(!cookies)return"";const match=(Array.isArray(cookies)?cookies.join(";"):cookies).match(/t_hash_t=[^;]+/);return match?match[0]:""}catch(_a){return""}}async function getMeta({link:link,providerContext:providerContext}){var _a;const{axios:axios}=providerContext,unixTime=Math.floor(Date.now()/1e3),bypass=await getBypassCookie(axios),headers={...BASE_HEADERS,Cookie:`ott=pv; hd=on; ${bypass}`},url=`${MAIN_URL}/pv/post.php?id=${link}&t=${unixTime}`;try{const data=(await axios.get(url,{headers:headers})).data,isSeries=Array.isArray(null==data?void 0:data.episodes)&&data.episodes.length&&null!==data.episodes[0],info={title:data.title,synopsis:data.desc,image:`https://imgcdn.kim/pv/v/${link}.jpg`,imdbId:"",type:isSeries?"series":"movie",linkList:[]};return isSeries?((null!==(_a=data.season)&&void 0!==_a?_a:[]).forEach(s=>{info.linkList.push({title:`Season ${s.s.replace("S","")}`,quality:"Default",episodesLink:`${link}|${s.id}`,directLinks:[]})}),info):(info.linkList.push({title:"â–¶ Play Movie",quality:"HD",episodesLink:"",directLinks:[{title:"Server 1",link:link}]}),info)}catch(_b){return{title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]}}}