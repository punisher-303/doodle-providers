"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Cache-Control":"no-store","Accept-Language":"en-US,en;q=0.9","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"},getMeta=async function({link:link,providerContext:providerContext}){var _a,_b;const{axios:axios,cheerio:cheerio}=providerContext,url=link,baseUrl=url.split("/").slice(0,3).join("/"),emptyResult={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]};try{const response=await axios.get(url,{headers:{...headers,Referer:baseUrl}}),$=cheerio.load(response.data),content=$(".entry-content, .post-inner, .content-inner").first(),result={title:"",synopsis:"",image:"",imdbId:"",type:"movie",linkList:[]},rawTitle=$("h1").first().text().trim()||$("title").text().trim();result.title=rawTitle.replace(/^Download\s*/i,"").split(/\s*(\d{4}|S\d+|Season|(?:\d+p)|\[|\|)/i)[0].replace(/[:\-]$/,"").trim(),(/Season\s*\d+|S\d+/i.test(rawTitle)||/Season\s*\d+/i.test(content.text()))&&(result.type="series"),result.image=content.find("img").first().attr("src")||"",result.synopsis=content.find("p").first().text().trim()||"";const imdbHref=content.find("a[href*='imdb.com/title/']").attr("href");result.imdbId=(null===(_a=null==imdbHref?void 0:imdbHref.match(/tt\d+/))||void 0===_a?void 0:_a[0])||"";const links=[];if("series"===result.type)content.find("h3, h4, h5").each((_,header)=>{var _a;const headerText=$(header).text().trim();if(/Series Info|Screenshots|Trailer/i.test(headerText)&&!/\d+p/i.test(headerText))return;const qualityMatch=(null===(_a=headerText.match(/\d+p/))||void 0===_a?void 0:_a[0])||"",episodesLink=$(header).nextAll("p").first().find("a").filter((_,a)=>/Episode List|Zee-Cloud|G-Direct/i.test($(a).text())).first().attr("href");episodesLink&&links.push({title:headerText,quality:qualityMatch,episodesLink:episodesLink})});else{const movieHeaders=content.find("h3").toArray();for(const h3 of movieHeaders){const h3Text=$(h3).text().trim();if(/Screenshots|Trailer|How To Download|Watch Online/i.test(h3Text)||!h3Text)continue;const qualityMatch=(null===(_b=h3Text.match(/\d+p/))||void 0===_b?void 0:_b[0])||"",href=$(h3).nextAll("p").first().find("a.maxbutton-download, a[href*='mvlink']").first().attr("href");if(!href)continue;const movieLinkEntry={title:h3Text,quality:qualityMatch,episodesLink:href,directLinks:[]};try{const page=await axios.get(href,{headers:headers,timeout:5e3}),$$=cheerio.load(page.data),finalLinks=$$("a").map((i,el)=>$$(el).attr("href")).get().filter(l=>l&&/zcloud|zee-cloud|zeecloud|gdrive/i.test(l));movieLinkEntry.directLinks=finalLinks.map(link=>({title:"Cloud Link",link:link,type:"movie"}))}catch(err){}links.push(movieLinkEntry)}}return result.linkList=links,result}catch(err){return emptyResult}};exports.getMeta=getMeta;